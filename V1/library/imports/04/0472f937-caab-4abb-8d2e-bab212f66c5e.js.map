{"version":3,"sources":["assets\\scripts\\Games\\eliminatingScene\\script\\EliminatingLand.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class EliminatingLand extends cc.Component {\r\n    // 实体星星\r\n    @property(cc.SpriteFrame) starEntity: cc.SpriteFrame = null;\r\n    // 三星\r\n    @property(cc.Sprite) stars: cc.Sprite[] = [];\r\n    // 获得星星音效\r\n    @property({ type: cc.AudioClip }) starAudio: cc.AudioClip = null;\r\n    // 锁\r\n    @property(cc.Node) lock: cc.Node = null;\r\n    // 星父节点\r\n    @property(cc.Node) Stars: cc.Node = null;\r\n    // 关卡资源\r\n    @property(cc.Prefab) Checkpoint: cc.Node = null;\r\n    // 关卡名字\r\n    @property(cc.Label) names: cc.Label = null;\r\n    // 关卡分数\r\n    recordData;\r\n    // 关卡ID\r\n    id: number = 0;\r\n\r\n    start() {\r\n        this.lock.active = false;\r\n    }\r\n\r\n\r\n    /**\r\n     * 初始化\r\n     * @param recordData 历史数据\r\n     * @param id         id\r\n     * @param state      状态\r\n     */\r\n    init(recordData, id, state) {\r\n        this.id = this.names.string = recordData ? recordData.id : id + 1;\r\n\r\n        if (recordData) {\r\n            this.recordData = recordData;\r\n            this.setStar(recordData.star);\r\n        }\r\n        if (state) {\r\n            setTimeout(() => {\r\n                const isLand = this.node.getComponent(cc.Button);\r\n                isLand.enabled = true;\r\n                isLand.interactable = false;\r\n                this.lock.active = true;\r\n                this.Stars.active = false;\r\n            }, 100);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 设置岛屿的星数\r\n     * @param starNumber  星数\r\n     * @param index       当前星下标\r\n     * @param audioEffect 是否播放音效\r\n     */\r\n    setStar(starNumber: number, index: number = 0, audioEffect: boolean = false) {\r\n        const star = this.stars[index];\r\n        star.spriteFrame = this.starEntity;\r\n        const { scale } = star.node;\r\n        star.node.runAction(\r\n            cc.sequence(\r\n                cc.scaleTo(.2, scale + .5),\r\n                cc.scaleTo(.2, scale),\r\n                cc.callFunc(() => {\r\n                    if (--starNumber) this.setStar(starNumber, ++index, audioEffect);\r\n                    audioEffect && cc.audioEngine.playEffect(this.starAudio, false);\r\n                }),\r\n            ),\r\n        );\r\n    }\r\n\r\n\r\n    /**\r\n     * 点开关卡\r\n     */\r\n    openCheckpoint() {\r\n        const { recordData } = this;\r\n        const { id, score, star } = recordData || {};\r\n        const Checkpoint = cc.instantiate(this.Checkpoint);\r\n        const script = Checkpoint.getComponent('EliminatingPanel');\r\n        \r\n        script.init({\r\n            names: id || this.id,\r\n            star,\r\n            score,\r\n        });\r\n        cc.director.getScene().addChild(Checkpoint);\r\n    }\r\n}\r\n"]}