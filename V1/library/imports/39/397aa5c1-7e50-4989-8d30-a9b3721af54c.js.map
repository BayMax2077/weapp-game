{"version":3,"sources":["assets\\scripts\\perfab\\script\\ListItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\nimport { loadImg } from '../../../scripts/lib/tool';\r\n\r\n@ccclass\r\nexport default class ListItem extends cc.Component {\r\n    // 标识ID\r\n    @property() id: number = 0;\r\n    // 商品价格\r\n    @property(cc.Label) itemPrice: cc.Label = null;\r\n    // 选中状态样式\r\n    @property(cc.SpriteFrame) itemTarget: cc.SpriteFrame = null;\r\n\r\n    ParentClass: any = null;\r\n    datas: any = {};\r\n    Sprite = null;\r\n    // 点击触发的事件\r\n    clickEvent: any;\r\n\r\n\r\n    /**\r\n     * 点击事件\r\n     */\r\n    async onClick() {\r\n        const { datas, id, clickEvent } = this;\r\n        clickEvent && await clickEvent(datas, id);\r\n        const { html, content } = datas;\r\n        if ((html || content) && typeof content === 'string') {\r\n            this.ParentClass.mainContent.string = html || content;\r\n        }\r\n        const Sprite = this.node.getComponent(cc.Sprite);\r\n        if (!this.Sprite) {\r\n            this.Sprite = Sprite.spriteFrame;\r\n        }\r\n        Sprite.spriteFrame = this.itemTarget;\r\n    }\r\n\r\n\r\n    /**\r\n     * 失焦\r\n     */\r\n    blur() {\r\n        this.node.getComponent(cc.Sprite).spriteFrame = this.Sprite;\r\n    }\r\n\r\n\r\n    /**\r\n     * 初始化数据\r\n     * @param data  - 初始出具\r\n     * @param index - 下标\r\n     * @param auto  - 是否自适应\r\n     */\r\n    init(data: any, index: number, auto: boolean = !1) {\r\n        const { id, title, sprite, scale } = data;\r\n\r\n        if (auto) {\r\n            // 大小适配\r\n            const parentWidth = this.node.parent.width;\r\n            this.node.width *= parentWidth / 140;\r\n            this.node.height *= parentWidth / 140;\r\n        }\r\n\r\n        this.id = id;\r\n        // 图片加载\r\n        if (sprite) {\r\n            typeof sprite === 'string' ? loadImg(sprite, this.setSprite.bind(this)) : this.setSprite(sprite, scale || .5);\r\n        } else {\r\n            this.itemPrice.string = title.length > 5 ? title.substr(0, 5) + '...' : title;\r\n        }\r\n        data.index = index;\r\n        this.datas = data;\r\n    }\r\n\r\n\r\n    /**\r\n     * 创建精灵图\r\n     */\r\n    setSprite(SpriteFrame, scale: number = .5) {\r\n        const node = new cc.Node();\r\n        const Sprite = node.addComponent(cc.Sprite);\r\n        Sprite.spriteFrame = SpriteFrame;\r\n        node.scale = scale;\r\n        this.node.addChild(node);\r\n    }\r\n}\r\n"]}