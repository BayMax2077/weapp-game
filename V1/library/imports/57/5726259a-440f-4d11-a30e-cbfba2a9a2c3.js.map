{"version":3,"sources":["assets\\scripts\\loginPage\\script\\loginPage.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\nimport axios from '../../utils/axiosUtils';\r\nimport State from '../../utils/state';\r\nimport { confusion } from '../../utils/confusion';\r\nimport packLoading from '../../Loading/loadingPackage';\r\n\r\n@ccclass\r\nexport default class Login extends cc.Component {\r\n    // 登录弹窗节点\r\n    @property(cc.Node) LoginPopup: cc.Node = null;\r\n    // 登录弹窗遮罩节点\r\n    @property(cc.Node) LoginPopupMask: cc.Node = null;\r\n    // 登录按钮\r\n    @property(cc.Node) LoginButton: cc.Node = null;\r\n    // 注册按钮\r\n    @property(cc.Node) registerButton: cc.Node = null;\r\n    // label 登录状态节点\r\n    @property(cc.Label) LoginStatus: cc.Label = null;\r\n    // 忘记密码文字节点\r\n    @property(cc.Label) resetPasswordNode: cc.Label = null;\r\n    // 加载资源\r\n    @property(cc.Prefab) loadingPrefab: cc.Prefab = null;\r\n    // 重设密码资源\r\n    @property(cc.Prefab) resetPassword = null;\r\n    // 注册资源\r\n    @property(cc.Prefab) registerAccount = null;\r\n    // 弹窗资源\r\n    @property(cc.Prefab) popupPrefab: cc.Prefab = null;\r\n    // 账户输入框\r\n    @property(cc.EditBox) accountInput = null;\r\n    // 密码输入框\r\n    @property(cc.EditBox) passwordInput = null;\r\n    // 弹窗消息内容资源\r\n    @property(cc.Prefab) messagePrefab: cc.Prefab = null;\r\n    // 弹窗标题图片资源\r\n    @property(cc.SpriteFrame) messageTitle: cc.SpriteFrame[] = [];\r\n    // 账号输入框\r\n    accountInputText: string = '';\r\n    // 密码输入框\r\n    passwordInputText: string = '';\r\n    // 当前登录弹窗状态\r\n    LoginPopupState = !0;\r\n    // 缓冲计时器\r\n    befferClock: any = null;\r\n    // BGM\r\n    bgm: cc.AudioClip = null;\r\n\r\n    onLoad() {\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.keyDown, this);\r\n        \r\n        // 服务器配置数据获取\r\n        axios\r\n            .api('server_config')\r\n            .then(res => {\r\n                State.serverConfig = res;\r\n\r\n                // 服务器状态过滤\r\n                if (res.state.value !== '0') {\r\n                    State.server.state = Number(res.state.value);\r\n                    this.showMessage();\r\n                    return this.popupMiniContent(res.state.note);\r\n                }\r\n\r\n                // 如果之前未登录 则 显示弹窗\r\n                !localStorage.getItem('userInfo') && this.showMessage();\r\n                // 如果本地存在 account 数据 则尝试进行自动登录\r\n                localStorage.getItem('account') && this.onLogin();\r\n            })\r\n            .catch(() => {\r\n                State.server.state = -1;\r\n                this.popupMiniContent('关服维护中...\\n请稍后再试!');\r\n            })\r\n        ;\r\n    }\r\n\r\n\r\n    async start () {\r\n        this.LoginPopupMask.scale = 0;\r\n        this.accountInput.node.on('text-changed', (e) => this.accountInputText = e.string, this);\r\n        this.passwordInput.node.on('text-changed', (e) => this.passwordInputText = e.string, this);\r\n        // BGM音量\r\n        this.node.getComponent(cc.AudioSource).volume = State.system.config.volume.music || .4;\r\n    }\r\n\r\n\r\n    /**\r\n     * 显示通知弹窗\r\n     * - 此弹窗展示：\r\n     *   + 未登录\r\n     *   + 登录失败\r\n     *   + 服务器状态异常 \r\n     * @param content 内容\r\n     */\r\n    showMessage(content?: string, titleIndex?: number) {\r\n        if (typeof content !== 'string') content = '';\r\n        // 启动时需展现内容\r\n        const { startMessage } = State.serverConfig;\r\n        if (startMessage && startMessage.value) {\r\n            const popupMessage = cc.instantiate(this.messagePrefab);\r\n            const loginMsgScript = popupMessage.getComponent('loginMessage');\r\n            if (this.messageTitle[startMessage.value]) {\r\n                const title = titleIndex || (!content ? startMessage.value : false);\r\n                title && loginMsgScript.setTitle(this.messageTitle[title]);\r\n            }\r\n            loginMsgScript.setContent(content || startMessage.note);\r\n            this.node.addChild(popupMessage);\r\n        }\r\n        this.node.getComponent(cc.AudioSource).play();\r\n    }\r\n\r\n\r\n    /**\r\n     * 重置资源\r\n     */\r\n    reset() {\r\n        State.io.disconnect && State.io.disconnect();\r\n        localStorage.clear();\r\n        const popup = this.popupMiniContent('资源 (重置/修复) 成功!', 2000).setEvent('success', () => {\r\n            popup.destroy();\r\n        });\r\n        cc.game.restart();\r\n    }\r\n\r\n\r\n    /**\r\n     * 弹出小弹窗\r\n     * @param content   内容\r\n     * @param closeTime 自动关闭时间\r\n     */\r\n    popupMiniContent(content: string, closeTime?: number) {\r\n        const popup = cc.instantiate(this.popupPrefab);\r\n        cc.director.getScene().addChild(popup);\r\n        const scriptPopup = popup.getComponent('popup');\r\n        scriptPopup.init(content);\r\n        scriptPopup.setEvent('success', () => {\r\n            popup.destroy();\r\n        });\r\n\r\n        // 自动关闭时间\r\n        if (closeTime) {\r\n            setTimeout(() => popup.destroy(), closeTime);\r\n        }\r\n\r\n        return scriptPopup;\r\n    }\r\n\r\n\r\n    /**\r\n     * 显示 关于\r\n     */\r\n    showAbout() {\r\n        this.showMessage(`    本游戏大部分资源来自 原创及基于CC0 1-4协议，如部分资源涉及版权请联系我们的开发人员（史莱姆），我们将第一时间对资源进行核实审查后修改。\r\n\r\n    邮件：admin@slmblog.com\r\n    Q Q：478889187`);\r\n    }\r\n\r\n\r\n    /**\r\n     * 按键按下时\r\n     */\r\n    keyDown(event: any) {\r\n        if (event.keyCode === cc.macro.KEY.enter) {\r\n            this.onLogin();\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 登录按钮点击\r\n     */\r\n    onLoginClick() {\r\n        const { LoginPopup, LoginPopupMask } = this;\r\n        LoginPopupMask.runAction(cc.scaleTo(0.1, 1).easing(cc.easeBackInOut()));\r\n        LoginPopup.runAction(cc.scaleTo(0.4, 1).easing(cc.easeBackInOut()));\r\n    }\r\n\r\n\r\n    /**\r\n     * 注册按钮点击\r\n     */\r\n    createPrefab(_e, prefabName: string) {\r\n        const instantiate = cc.instantiate(this[prefabName]);\r\n        const script = instantiate.getComponent(prefabName);\r\n        if (script) {\r\n            script.parentClass = this;\r\n        }\r\n        this.node.addChild(instantiate);\r\n    }\r\n\r\n\r\n    /**\r\n     * 关闭登录按钮\r\n     */\r\n    onLoginClose() {\r\n        const { LoginPopup, LoginPopupMask } = this;\r\n        LoginPopup.runAction(cc.scaleTo(1, 0).easing(cc.easeBackInOut()));\r\n        LoginPopupMask.scale = 0;\r\n    }\r\n\r\n\r\n    /**\r\n     * 加载界面\r\n     */\r\n    async loadingScens() {\r\n        // 服务器状态检测\r\n        console.log(State.server.state);\r\n        if (State.server.state !== 0) {\r\n            this.popupMiniContent(\r\n                State.serverConfig.state.note ||\r\n                '关服维护中...\\n请稍后再试!'\r\n            );\r\n            return false;\r\n        }\r\n\r\n        const loading = cc.instantiate(this.loadingPrefab);\r\n        const loadingScript = loading.getComponent('loading');\r\n        this.node.addChild(loading);\r\n        let timeout = null;\r\n        await packLoading({\r\n            sub: [\r\n                'lib', 'resPrefabSub', 'perfabScript', 'HomeScript', 'GamesScript',\r\n            ],\r\n            scene: [\r\n                'Home',\r\n            ],\r\n        }, (_packname, count, all, message) => {\r\n            const nextValue = ((count + 1) / all * 100) / 100;\r\n            const currentValue = (count / all * 100) / 100;\r\n            const averageValue = (nextValue - currentValue) / 20;\r\n            let befferIndex = 0;\r\n            loadingScript.updateValue(currentValue, message);\r\n\r\n            // 缓冲效果\r\n            this.befferClock && clearInterval(this.befferClock);\r\n            if (nextValue < 1) {\r\n                this.befferClock = setInterval(() => {\r\n                    if (befferIndex < 19) {\r\n                        befferIndex++;\r\n                        loadingScript.updateValue(currentValue + befferIndex * averageValue);\r\n                    } else clearInterval(this.befferClock);\r\n                }, Math.random() * 200);\r\n            }\r\n            \r\n            // 资源加载完成\r\n            if (count === all) {\r\n                timeout && clearTimeout(timeout);\r\n                cc.director.loadScene('Home');\r\n                return !0;\r\n            }\r\n\r\n            // 资源加载超时 1s\r\n            timeout && clearTimeout(timeout);\r\n            timeout = setTimeout(() => {\r\n                this.LoginStatus.string = '资源加载超时\\n请稍后再试!';\r\n                loading.destroy();\r\n            }, 60000);\r\n            return !0;\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * 登录账户\r\n     */\r\n    async onLogin() {\r\n        // console.log(await axios.api('xxx').then((res) => console.log(res)));\r\n\r\n        // 已自动登录则拒绝登录\r\n        if (Date.now() - State.userInfo.last_login_time < 10000) {\r\n            return this.loadingScens();\r\n        }\r\n\r\n        const {\r\n            accountInput,\r\n            passwordInput,\r\n            LoginStatus,\r\n            LoginButton,\r\n            registerButton,\r\n            resetPasswordNode,\r\n        } = this;\r\n        let {\r\n            accountInputText,\r\n            passwordInputText,\r\n        } = this;\r\n\r\n        // 重新登录\r\n        const { a, p } = JSON.parse(localStorage.getItem('account') || '{}');\r\n        if (a && p) {\r\n            passwordInputText = passwordInputText || confusion.decrypt(p);\r\n            accountInputText = accountInputText || confusion.decrypt(a);\r\n            this.onLoginClick();\r\n        }\r\n\r\n        if (!accountInputText || !passwordInputText) {\r\n            return;\r\n        }\r\n\r\n        LoginStatus.string = '登录中...';\r\n        accountInput.node.scale = 0;\r\n        passwordInput.node.scale = 0;\r\n        registerButton.active = false;\r\n        LoginButton.active = false;\r\n        resetPasswordNode.node.active = false;\r\n\r\n        // 超时\r\n        let buys = setTimeout(() => {\r\n            LoginStatus.string = '登录失败\\n服务器超时!';\r\n            setTimeout(this.resetLoginUI.bind(this), 1500);\r\n        }, 7000);\r\n\r\n        axios\r\n            .api('login', {\r\n                data: {\r\n                    account: accountInputText,\r\n                    password: passwordInputText,\r\n                }\r\n            })\r\n            .then((res) => {\r\n                clearTimeout(buys);\r\n                if (res.token) {\r\n                    LoginStatus.string = `登录成功!\\n欢迎回来\\n${res.nickname}`;\r\n                    localStorage.setItem('userInfo', JSON.stringify(res));\r\n                    State.userInfo = res;\r\n                    this.loadingScens();\r\n                    // 自动关闭并重置布局\r\n                    setTimeout(() => {\r\n                        this.onLoginClose();\r\n                        this.resetLoginUI();\r\n                    }, 2000);\r\n                    // 简单的混淆\r\n                    const account = confusion.encrypt(accountInputText);\r\n                    const password = confusion.encrypt(passwordInputText);\r\n                    localStorage.setItem('account', JSON.stringify({\r\n                      a: account,\r\n                      p: password,\r\n                    }));\r\n                    cc.game.emit('tokenUpdate', res.token); \r\n                } else {\r\n                    LoginStatus.string = `登录失败\\n${res.msg || '服务器繁忙'}`;\r\n                    setTimeout(this.resetLoginUI.bind(this), 1500);\r\n                }\r\n            })\r\n        ;\r\n    }\r\n\r\n\r\n    /**\r\n     * 重置登录界面\r\n     */\r\n    resetLoginUI() {\r\n        this.LoginStatus.string = '';\r\n        this.accountInput.node.scale = 1;\r\n        this.passwordInput.node.scale = 1;\r\n        this.resetPasswordNode.node.active = true;\r\n        this.LoginButton.active = true;\r\n        this.registerButton.active = true;\r\n    }\r\n\r\n\r\n    // update (dt) {}\r\n}\r\n"]}