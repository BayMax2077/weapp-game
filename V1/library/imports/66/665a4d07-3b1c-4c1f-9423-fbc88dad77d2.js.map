{"version":3,"sources":["assets\\scripts\\Games\\wzq\\main.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\nimport State from '../../utils/state';\r\nimport axios from '../../utils/axiosUtils';\r\nimport { setAutoRecursively, loadImg } from '../../../scripts/lib/tool';\r\n\r\n/**\r\n * 玩家数据\r\n */\r\nconst PlayerItem = {\r\n    dataIndex: 0,\r\n    nickName: cc.Label,\r\n    avatar: cc.Sprite,\r\n    setp: cc.Label,\r\n    timeOut: cc.Label,\r\n};\r\nconst Player = cc.Class({\r\n    name: 'PlayerItem',\r\n    properties: PlayerItem,\r\n})\r\n\r\nlet clock = null;         // 计时器\r\nlet count = 0;            // 总共赢的数量572种\r\nconst cooling = 5 * 60;   // 冷却时间\r\nconst box = [];           // 全部落子点\r\nconst wins = [];          // 全部赢的方法 三维数组\r\nconst myWin = [];         // 玩家落棋位置\r\nconst computerScore = []; // 电脑分数\r\nconst computerWin = [];   // 电脑落棋位置\r\n\r\n\r\n@ccclass\r\nexport default class GoBangMainService extends cc.Component {\r\n    // 棋子资源\r\n    @property(cc.Prefab) qz: cc.Prefab = null;\r\n    // 结算界面资源\r\n    @property(cc.Prefab) chessPrefab: cc.Prefab = null;\r\n    // 房间号\r\n    @property(cc.Label) roomCode: cc.Label = null;\r\n    // 弹窗\r\n    @property(cc.Prefab) popupPrefab: cc.Prefab = null;\r\n    // 主节点\r\n    @property(cc.Canvas) Canvas: cc.Canvas = null;\r\n    // 玩家\r\n    @property(Player) Players: {\r\n        dataIndex: number;\r\n        nickName: cc.Label;\r\n        avatar: cc.Sprite;\r\n        setp: cc.Label;\r\n        timeOut: cc.Label;\r\n    }[] = [];\r\n    // 玩家数据\r\n    playersData: {\r\n        id: number,\r\n        nickname: string;\r\n        avatarUrl: number;\r\n        setp: number;\r\n        timeOut: number;\r\n        time: number,\r\n    }[] = [];\r\n    // 棋子数据\r\n    picecArray: any = [];\r\n    // 房间数据\r\n    roomInfo: any = {};\r\n    // 加入事件容器\r\n    roomJoinEvent = () => this.fetchRoomInfo();\r\n    // 下棋事件容器\r\n    roomDataEevent = data => this.roomData(data);\r\n    // 离开事件容器\r\n    roomExitEevent = data => this.rommleave(data);\r\n    // 是否为人机模式\r\n    isMachine: boolean = !1;\r\n\r\n\r\n    /**\r\n     * 界面加载时\r\n     */\r\n    onLoad() {\r\n        // 获取房间数据并且绑定事件\r\n        // console.log(State.io);\r\n        State.io.on('rommjoin', this.roomJoinEvent);\r\n        this.fetchRoomInfo();\r\n        State.io.on('room/data', this.roomDataEevent);\r\n        State.io.on('rommleave', this.roomExitEevent);\r\n        setAutoRecursively([\r\n            'c3a88e04-eee8-42e6-ade2-27c6e1896203',\r\n            'db61dc3a-8854-4824-a19a-472e74d7aa03',\r\n            'fc30fbe0-1668-4af2-8dcb-a798b469719b',\r\n            '0b7da469-5226-4405-aad7-56210d04d191',\r\n        ]);\r\n    }\r\n\r\n\r\n    /**\r\n     * 游戏场景销毁时\r\n     */\r\n    onDestroy() {\r\n        // 接触IM玩家加入房间事件绑定\r\n        State.io.off('rommjoin', this.roomJoinEvent);\r\n        State.io.off('room/data', this.roomDataEevent);\r\n        State.io.off('rommleave', this.roomExitEevent);\r\n        clock && clearInterval(clock);\r\n    }\r\n\r\n\r\n    /**\r\n     * 暂停游戏\r\n     */\r\n    stopGames() {\r\n        cc.loader.loadRes('prefab/stopGames', cc.Prefab, (err, prefab) => {\r\n            if (prefab) {\r\n                const popup = cc.instantiate(prefab);\r\n                cc.director.getScene().addChild(popup);\r\n                const stopGames = popup.getComponent('stopGames');\r\n                stopGames.backHomeEvent = () => {\r\n                    this.backHome();\r\n                };\r\n                // 设置分享\r\n                stopGames.shareData = {\r\n                    title: !this.isMachine ? `我在[${this.roomInfo.roomCode}]等你, 看谁先五子连珠!` : '饭点时间来盘棋，游戏优惠全拿下...',\r\n                    imageUrl: State.OSS_BASE + '/H5Game/share/gobang.jpg',\r\n                    query: !this.isMachine ? `fn=joinRoom&roomCode=${State.gameData.roomCode}` : '',\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * 返回首页\r\n     */\r\n    backHome() {\r\n        const popup = cc.instantiate(this.popupPrefab);\r\n        cc.director.getScene().addChild(popup);\r\n        const scriptPopup = popup.getComponent('popup');\r\n        this.playersData.forEach((item, index: number) => {\r\n            if (item.id === State.userInfo.id) {\r\n                // console.log(index);\r\n                scriptPopup.init('是否要返回大厅?\\n' + (index ? '将退出房间' : '房间将被解散'));\r\n                scriptPopup.setEvent('success', () => {\r\n                    this.gameOver({ type: index ? 0 : 1 });\r\n                    popup.destroy();\r\n                });\r\n                scriptPopup.setEvent('close', () => {});\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * 开始游戏\r\n     */\r\n    startGame() {\r\n        this.initPiece();\r\n        const { Players } = this;\r\n        Players.forEach((player: any) => {\r\n            player.setp.string = 0;\r\n            player.timeOut.string = timeFrom(0);\r\n            this.playersData[0].timeOut = cooling;\r\n        });\r\n        // console.log(clock);\r\n        !clock && (clock = setInterval(() => {\r\n            this.playersData.forEach((player, index) => {\r\n                if (player.timeOut) {\r\n                    player.timeOut--;\r\n                    Players[index].timeOut.string = timeFrom(player.timeOut);\r\n                    if(player.timeOut === 0) {\r\n                        this.gameOver({\r\n                            type: index ? 0 : 1,\r\n                        });\r\n                    }\r\n                } else if (player.timeOut === 0) {\r\n                    Players[index].timeOut.string = timeFrom(0);\r\n                }\r\n            })\r\n        }, 1000));\r\n    }\r\n\r\n\r\n    /**\r\n     * 游戏结束\r\n     * @param point - 棋子坐标\r\n     */\r\n    gameOver(picec: any) {\r\n        const { Players, playersData } = this;\r\n        const winnerUser = playersData[picec.type];\r\n        const loserUser = playersData[picec.type ? 0 : 1];\r\n        axios.api('room_exit', {\r\n            data: {\r\n                roomCode: this.roomInfo.id,\r\n            },\r\n        }).then(() => {});\r\n\r\n        if (!winnerUser) {\r\n            cc.director.loadScene('Home');\r\n            return;\r\n        }\r\n\r\n        const chessPrefab = cc.instantiate(this.chessPrefab);\r\n        this.node.parent.addChild(chessPrefab);\r\n        const chessScript = chessPrefab.getComponent('overScript');\r\n        chessScript.init({\r\n            players: [{ \r\n                nickname: winnerUser.nickname,\r\n                avatarUrl: Players[picec.type].avatar.spriteFrame,\r\n                score: winnerUser.setp\r\n                    ? Math.round(winnerUser.setp + ((cooling - (winnerUser.time || 1) / winnerUser.setp) || 0))\r\n                    : 0,\r\n                item: {\r\n                    setp: winnerUser.setp + 1,\r\n                    time: winnerUser.setp ? Math.floor(winnerUser.time / winnerUser.setp) + 's' : 0,\r\n                },\r\n                winner: !0,\r\n            },{ \r\n                nickname: loserUser.nickname,\r\n                avatarUrl: Players[picec.type ? 0 : 1].avatar.spriteFrame,\r\n                score: loserUser.setp\r\n                    ? Math.round(loserUser.setp + ((cooling / 2 - (loserUser.time || 1) / loserUser.setp) || 0))\r\n                    : 0,\r\n                item: {\r\n                    setp: loserUser.setp,\r\n                    time: loserUser.setp ? Math.floor(loserUser.time / loserUser.setp) + 's' : 0,\r\n                },\r\n                winner: !1,\r\n            }],\r\n            itemKey: {\r\n                setp: '步数',\r\n                time: '平均耗时',\r\n            },\r\n            time: State.gameData.gameData.createTime,\r\n            roomId: State.gameData.roomCode,\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * 离开房间事件\r\n     * @param data - 离开房间数据\r\n     */\r\n    rommleave(data) {\r\n        data = typeof data === 'string' ? JSON.parse(data) : data;\r\n        this.gameOver({\r\n            type: data.id ? 0 : 1,\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * 获取房间信息\r\n     */\r\n    fetchRoomInfo() {\r\n        const that = this;\r\n        axios.api('room_info').then(res => {\r\n            if (res.status !== false && res.players) {\r\n                that.roomInfo = res;\r\n                that.roomCode.string = res.roomCode;\r\n                that.playersData = [];\r\n                (res.players || []).forEach((player) => this.playerJoin(player));\r\n                State.gameData = res;\r\n\r\n                // 开始游戏判断\r\n                if (res.isStart) {\r\n                    this.startGame();\r\n                }\r\n            } else {\r\n                // 异常加入游戏房间，踢出到首页\r\n                // cc.director.loadScene('Home');\r\n                // 人机模式\r\n                this.playerJoin(State.userInfo);\r\n                this.playerJoin({\r\n                    id: -1,\r\n                    nickname: '电脑玩家',\r\n                    avatarUrl: 0,\r\n                });\r\n                State.gameData = {\r\n                    id: 1,\r\n                    gameName: 'gobang',\r\n                    name: '五子棋 人机对战',\r\n                    peopleMax: 0,\r\n                    frequency: 0,\r\n                    payType: 0,\r\n                    pwdType: 0,\r\n                    roomCode: \"------\",\r\n                    roomPwd: -1,\r\n                    gameData: { createTime: Date.now(), blackSetp: 0, whiteSetp: 0, target: 0 },\r\n                    players: this.playersData,\r\n                    isStart: !0,\r\n                }\r\n                this.isMachine = !0;\r\n                this.startGame();\r\n                this.initModel();\r\n            }\r\n        });\r\n    }\r\n\r\n    \r\n    /**\r\n     * 玩家加入房间\r\n     * @param userInfo - 玩家数据\r\n     */\r\n    playerJoin(userInfo: { id: number; nickname: string; avatarUrl: number; }) {\r\n        const userIndex = this.playersData.push({\r\n            ...userInfo,\r\n            setp: 0,\r\n            timeOut: 0,\r\n            time: 0,\r\n        }) - 1;\r\n        const target = this.Players[userIndex];\r\n        target.dataIndex = userIndex;\r\n        loadImg(\r\n            userInfo.avatarUrl,\r\n            spriteFrame => {\r\n                target.avatar.spriteFrame = spriteFrame;\r\n            },\r\n            'avatar',\r\n            userInfo.id\r\n        );\r\n        target.nickName.string = userInfo.nickname;\r\n    }\r\n\r\n\r\n    /**\r\n     * 下棋时\r\n     * @param data - 棋子坐标\r\n     */\r\n    roomData(data: { x: number; y: number; s: number; }) {\r\n        data = typeof data === 'string' ? JSON.parse(data) : data;\r\n        // console.log(data);\r\n        if (!data || data.y === undefined || data.x === undefined || data.s === undefined) return;\r\n        // console.log(1);\r\n        const arr = this.picecArray;\r\n        const targetPiece = arr[data.y][data.x];\r\n        const senderID = data.s;\r\n        const senderUser = this.playersData[senderID];\r\n        const senderPlayer = this.Players[senderID];\r\n        if (targetPiece) {\r\n            targetPiece.script.ioClick(senderID);\r\n        }\r\n        senderUser.time += cooling - senderUser.timeOut;\r\n        senderUser.timeOut = 0;\r\n        senderUser.setp++;\r\n        senderPlayer.timeOut.string = timeFrom(0);\r\n        senderPlayer.setp.string = String(this.playersData[data.s].setp);\r\n\r\n        this.playersData[senderID ? 0 : 1].timeOut = cooling;\r\n        box[data.y][data.x] = 1;\r\n    }\r\n\r\n\r\n    /**\r\n     * 人机下棋\r\n     * @param data - 棋子坐标\r\n     */\r\n    machineDownPiece(data: { x: number; y: number; s: number; }) {\r\n        this.roomData(data);\r\n\r\n        var myScore = []; //我方分数\r\n        var max = 0; //最大分数\r\n        var u = 0, v = 0; //最大分数点\r\n        for(var k = 0; k<count; k++) {//第几种赢法\r\n            if(wins[data.y][data.x][k]) {\r\n                myWin[k]++;\r\n                computerWin[k] = 999; //因为我方在这个点上已经落子，所以计算机不可能在这个点上赢，\r\n                // if(myWin[k] == 5) {\r\n                //     console.log('你赢了')\r\n                // }\r\n            }\r\n        }\r\n        for (var i = 0; i < 15; i++) {\r\n            myScore[i] = [];\r\n            computerScore[i] = [];\r\n            for (var j = 0; j < 15; j++) {\r\n                myScore[i][j] = 0;\r\n                computerScore[i][j] = 0;\r\n            }\r\n        }\r\n        for (var i = 0; i < 15; i++) {\r\n            for (var j = 0; j < 15; j++) {\r\n                if (box[i][j] == -1) { //每个空闲点上进行计算分数\r\n                    for (var k = 0; k < count; k++) { //遍历所有可以赢的，数量\r\n                        if (wins[i][j][k]) { //可以赢的点进行算分\r\n                            if (myWin[k] == 1) {\r\n                                myScore[i][j] += 200;\r\n                            } else if (myWin[k] == 2) {\r\n                                myScore[i][j] += 400;\r\n                            } else if (myWin[k] == 3) {\r\n                                myScore[i][j] += 2000;\r\n                            } else if (myWin[k] == 4) {\r\n                                myScore[i][j] += 10000;\r\n                            }\r\n\r\n                            if (computerWin[k] == 1) {\r\n                                computerScore[i][j] += 220;\r\n                            } else if (computerWin[k] == 2) {\r\n                                computerScore[i][j] += 420;\r\n                            } else if (computerWin[k] == 3) {\r\n                                computerScore[i][j] += 2100;\r\n                            } else if (computerWin[k] == 4) {\r\n                                computerScore[i][j] += 20000;\r\n                            }\r\n                        }\r\n                    }\r\n                    //得出最大分数的点，并赋给u,v\r\n                    if (myScore[i][j] > max) {\r\n                        max = myScore[i][j];\r\n                        u = i;\r\n                        v = j;\r\n                    } else if (myScore[i][j] == max) {\r\n                        if (computerScore[i][j] > computerScore[u][v]) {\r\n                            u = i;\r\n                            v = j;\r\n                        }\r\n                    }\r\n\r\n                    if (computerScore[i][j] > max) {\r\n                        max = computerScore[i][j];\r\n                        u = i;\r\n                        v = j;\r\n                    } else if (computerScore[i][j] == max) {\r\n                        if (myScore[i][j] > myScore[u][v]) {\r\n                            u = i;\r\n                            v = j;\r\n                        }\r\n                    }\r\n\r\n                }//所有空闲点上进行计算分数\r\n            }\r\n        }\r\n        this.roomData({\r\n            y: u,\r\n            x: v,\r\n            s: 1,\r\n        });\r\n        for (var k = 0; k < count; k++) {//第几种赢法\r\n            if (wins[u][v][k]) {\r\n                computerWin[k]++;\r\n                myWin[k] = 999;\r\n                // if (computerWin[k] == 5) {\r\n                //     console.log('计算机赢了--')\r\n                // }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 渲染时\r\n     */\r\n    initPiece() {\r\n        // 获取玩家棋子ID\r\n        let poeceID = -1;\r\n        State.gameData.players.forEach((player, index) => {\r\n            if (player.id === State.userInfo.id) {\r\n                poeceID = index;\r\n            }\r\n        });\r\n        if (poeceID === -1) {\r\n            return;\r\n        }\r\n\r\n        const arr = this.picecArray;\r\n        // 预设棋盘棋子为透明定位至方格上\r\n        for (let y = 0; y < 15; y++) {\r\n            box[y] = [];\r\n            wins[y] = [];\r\n            arr.push([]);\r\n            for (let x = 0; x < 15; x++) {\r\n                box[y][x] = -1;\r\n                wins[y][x] = [];\r\n                const newQz = cc.instantiate(this.qz);\r\n                const qzScript = newQz.getComponent('qz');\r\n                const Point = {\r\n                    row: y,\r\n                    col: x,\r\n                    x: x * 36.5 - (36.5 * 7),\r\n                    y: y * 36 + (36 * 7) - (y * 2 * 36),\r\n                    pieceType: -1,\r\n                    script: qzScript,\r\n                };\r\n                qzScript.init(Point);\r\n                qzScript.game = this;\r\n                qzScript.pieceType = poeceID;\r\n\r\n                this.node.addChild(newQz);\r\n                newQz.x = Point.x;\r\n                newQz.y = Point.y;\r\n\r\n                arr[arr.length - 1].push(Point);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 五子连通检测\r\n     * @param point     - 棋子坐标\r\n     * @param pieceType - 棋子类型 0：黑子  1：白子\r\n     */\r\n    checkConnectivity(point: Point, pieceType: ( 0 | 1 ) = 1) {\r\n        const { picecArray } = this;\r\n        // y轴判断是否连通\r\n        const targetPiece = {\r\n            type: pieceType,\r\n            x: 0,\r\n            y: 0,\r\n            skewX: 0,\r\n            skewY: 0,\r\n        };\r\n        // Y轴\r\n        for (let y = -4; y <= 4; y++) {\r\n            // Y轴\r\n            const pointY = point.row + y;\r\n            if (picecArray[pointY]) {\r\n                const item = picecArray[pointY][point.col];\r\n                if (targetPiece.type === item.pieceType) {\r\n                    targetPiece.y++;\r\n                    if (targetPiece.y === 5) return this.gameOver(targetPiece);\r\n                } else {\r\n                    targetPiece.y = 0;\r\n                }\r\n            }\r\n            // X轴\r\n            let pointX = point.col + y;\r\n            if (picecArray[point.row][pointX]) {\r\n                const item = picecArray[point.row][pointX];\r\n                if (targetPiece.type === item.pieceType) {\r\n                    targetPiece.x++;\r\n                    if (targetPiece.x === 5) return this.gameOver(targetPiece);\r\n                } else {\r\n                    targetPiece.x = 0;\r\n                }\r\n            }\r\n            // skew X\r\n            if (picecArray[pointY] && picecArray[pointY][pointX]) {\r\n                const item = picecArray[pointY][pointX];\r\n                if (targetPiece.type === item.pieceType) {\r\n                    targetPiece.skewX++;\r\n                    if (targetPiece.skewX === 5) return this.gameOver(targetPiece);\r\n                } else {\r\n                    targetPiece.skewX = 0;\r\n                }\r\n            }\r\n            // skew Y\r\n            pointX = point.col + (- y);\r\n            if (picecArray[pointY] && picecArray[pointY][pointX]) {\r\n                const item = picecArray[pointY][pointX];\r\n                if (targetPiece.type === item.pieceType) {\r\n                    targetPiece.skewY++;\r\n                    if (targetPiece.skewY === 5) return this.gameOver(targetPiece);\r\n                } else {\r\n                    targetPiece.skewY = 0;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 初始化模型\r\n     */\r\n    initModel() {\r\n        for (var i = 0; i < 15; i++) {\r\n            wins[i] = [];\r\n            for (var j = 0; j < 15; j++) {\r\n                wins[i][j] = [];\r\n            }\r\n        }\r\n        //横向\r\n        for (var a = 0; a < 15; a++) {\r\n            for (var b = 0; b < 11; b++) {\r\n                for (var c = 0; c < 5; c++) {\r\n                    wins[a][b + c][count] = true;\r\n                }\r\n                count++;\r\n            }\r\n        }\r\n        //纵向\r\n        for (var a = 0; a < 15; a++) {\r\n            for (var b = 0; b < 11; b++) {\r\n                for (var c = 0; c < 5; c++) {\r\n                    wins[b + c][a][count] = true;\r\n                }\r\n                count++;\r\n            }\r\n        }\r\n\r\n        //斜 '\\'\r\n        for (var a = 0; a < 11; a++) {\r\n            for (var b = 0; b < 11; b++) {\r\n                for (var c = 0; c < 5; c++) {\r\n                    wins[a + c][b + c][count] = true;\r\n                }\r\n                count++;\r\n            }\r\n        }\r\n        //反斜 '/'\r\n        for (var a = 0; a < 11; a++) {\r\n            for (var b = 4; b < 15; b++) {\r\n                for (var c = 0; c < 5; c++) {\r\n                    wins[a + c][b - c][count] = true;\r\n                }\r\n                count++;\r\n            }\r\n        }\r\n\r\n        for(var i = 0; i < count;i++) {\r\n            myWin[i] = 0;\r\n            computerWin[i] = 0;\r\n        }\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n\r\n/**\r\n * 转换时间为00:00的格式\r\n * @param time - 时间\r\n */\r\nfunction timeFrom(time) {\r\n    return `00${Math.floor(time / 60)}`.substr(-2) + ':' + `00${Math.floor(time % 60)}`.substr(-2);\r\n}\r\n\r\n/**\r\n * 棋子坐标\r\n */\r\ninterface Point {\r\n    row: number;\r\n    col: number;\r\n    pieceType: ( 0 | 1 | -1 )\r\n}"]}