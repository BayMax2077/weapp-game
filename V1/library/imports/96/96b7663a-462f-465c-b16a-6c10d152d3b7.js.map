{"version":3,"sources":["assets\\scripts\\Games\\flightChess\\script\\dice.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,kFAAkF;AAClF,yFAAyF;AACzF,mBAAmB;AACnB,4FAA4F;AAC5F,mGAAmG;AACnG,8BAA8B;AAC9B,4FAA4F;AAC5F,mGAAmG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAE7F,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAC1C,IAAI,KAAK,GAAG,IAAI,CAAC;AAGjB;IAAsC,4BAAY;IAAlD;QAAA,qEA6DC;QA1DG,UAAI,GAAgB,EAAE,CAAC;QAEvB;;WAEG;QACH,iBAAW,GAAW,CAAC,CAAC;QAOxB;;WAEG;QACH,UAAI,GAAW,EAAE,CAAC;;QA0ClB,iBAAiB;IACrB,CAAC;IAnCG,yBAAM,GAAN;QACI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,EAAxB,CAAwB,CAAC,CAAC;QACpD,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;IACpC,CAAC;IAGK,0BAAO,GAAb,UAAc,GAAW;;;;gBACrB,IAAI,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;oBAAE,sBAAO;gBACxC,sBAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;wBAC/B,IAAI,WAAW,GAAG,CAAC,CAAC;wBACpB,aAAa,CAAC,KAAK,CAAC,CAAC;wBACrB,KAAK,GAAG,WAAW,CAAC;4BAChB,WAAW,EAAE,CAAC;4BACd,KAAI,CAAC,IAAI,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;4BAChD,IAAM,MAAM,GAAG,OAAO,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;4BACvE,IAAM,MAAM,GAAG,KAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;4BACjC,IAAI,MAAM,EAAE;gCACR,MAAM,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;6BAC7B;4BACD,KAAI,CAAC,WAAW,GAAG,MAAM,CAAC;4BAC1B,IAAI,WAAW,KAAK,EAAE,EAAE;gCACpB,OAAO,CAAC,MAAM,CAAC,CAAC;gCAChB,KAAI,CAAC,YAAY,IAAI,KAAI,CAAC,YAAY,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;gCACpD,aAAa,CAAC,KAAK,CAAC,CAAC;6BACxB;wBACL,CAAC,EAAE,KAAI,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC;oBACvB,CAAC,CAAC,EAAC;;;KACN;IAGD,4BAAS,GAAT;QACI,aAAa,CAAC,KAAK,CAAC,CAAC;IACzB,CAAC;IAvDD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;0CACG;IAHN,QAAQ;QAD5B,OAAO;OACa,QAAQ,CA6D5B;IAAD,eAAC;CA7DD,AA6DC,CA7DqC,EAAE,CAAC,SAAS,GA6DjD;kBA7DoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\nlet clock = null;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    @property(cc.Sprite)\r\n    dice: cc.Sprite[] = [];\r\n\r\n    /**\r\n     * 当前骰子下标\r\n     */\r\n    targetIndex: number = 0;\r\n\r\n    /**\r\n     * 点击时触发的事件\r\n     */\r\n    onClickEvent: any;\r\n\r\n    /**\r\n     * 旋转秒数[ms]\r\n     */\r\n    time: number = 50;\r\n\r\n    /**\r\n     * 事件\r\n     */\r\n    event;\r\n\r\n\r\n    onLoad() {\r\n        this.dice.forEach(dice => dice.node.active = false);\r\n        this.dice[0].node.active = true;\r\n    }\r\n\r\n\r\n    async onClick(num: number) {\r\n        if (this.event && !this.event()) return;\r\n        return new Promise((resolve, reject) => {\r\n            let updateCount = 0;\r\n            clearInterval(clock);\r\n            clock = setInterval(() => {\r\n                updateCount++;\r\n                this.dice[this.targetIndex].node.active = false;\r\n                const random = typeof num === 'number' ? num : (Math.random() * 6 | 0);\r\n                const target = this.dice[random];\r\n                if (target) {\r\n                    target.node.active = true;\r\n                }\r\n                this.targetIndex = random;\r\n                if (updateCount === 30) {\r\n                    resolve(random);\r\n                    this.onClickEvent && this.onClickEvent(random, num);\r\n                    clearInterval(clock);\r\n                }\r\n            }, this.time / 30);\r\n        });\r\n    }\r\n\r\n\r\n    onDestroy() {\r\n        clearInterval(clock);\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}