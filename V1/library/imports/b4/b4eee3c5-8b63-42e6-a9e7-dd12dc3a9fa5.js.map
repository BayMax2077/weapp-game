{"version":3,"sources":["assets\\resources\\prefab\\script\\keyboard.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n/**\r\n * 键盘组件\r\n */\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class KeyBoard extends cc.Component {\r\n\r\n    /**\r\n     * 内容标签\r\n     */\r\n    @property(cc.Label)\r\n    Label: cc.Label = null;\r\n\r\n    /**\r\n     * 内容盒子\r\n     */\r\n    @property(cc.Node)\r\n    ContentBox: cc.Node = null;\r\n\r\n    /**\r\n     * 父级类 调用者this\r\n     */\r\n    parentClass: any = {};\r\n\r\n    start() {\r\n        // 展现动画\r\n        this.ContentBox.scale = 0;\r\n        this.ContentBox.runAction(\r\n            cc.scaleTo(0.5, 1, 1).easing(cc.easeBackOut()),\r\n        );\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.keyDown, this);\r\n    }\r\n\r\n    \r\n    /**\r\n     * 键盘按下事件\r\n     * @param event - 事件\r\n     */\r\n    keyDown(event) {\r\n        const code = event.keyCode;\r\n        if (code >= 96 && code <= 105) {\r\n            this.onClickContent(false, code - 96);\r\n        }\r\n        if (code === 110) {\r\n            this.onClickDecimal(false, '.');\r\n        }\r\n        if (code === cc.macro.KEY.enter) {\r\n            this.onClickSuccess();\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 点击0-9的数值时\r\n     * @param _event  - 事件体\r\n     * @param content - 内容\r\n     */\r\n    onClickContent(_event, content: number) {\r\n        this.Label.string += content;\r\n    }\r\n\r\n\r\n    /**\r\n     * 点击.\r\n     * @param _event  - 事件体\r\n     * @param content - 内容\r\n     */\r\n    onClickDecimal(_event, content: string) {\r\n        const { Label } = this;\r\n        if (Label.string.indexOf('.') === -1 && Label.string.length) {\r\n            Label.string += content;\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 删除键\r\n     */\r\n    onClickDelete() {\r\n        const { Label } = this;\r\n        if (Label.string.length) {\r\n            Label.string = Label.string.substr(0, Label.string.length - 1);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 完成键\r\n     */\r\n    onClickSuccess() {\r\n        this.parentClass.emit && this.parentClass.emit(this.Label.string);\r\n    }\r\n\r\n\r\n    /**\r\n     * 重置键\r\n     */\r\n    onClickReset() {\r\n        this.Label.string = '';\r\n    }\r\n\r\n\r\n    /**\r\n     * 关闭键\r\n     */\r\n    onClickClose() {\r\n        this.parentClass.close && this.parentClass.close();\r\n        this.ContentBox.runAction(\r\n            cc.sequence(\r\n                cc.scaleTo(0.5, .5, .5).easing(cc.easeBackIn()),\r\n                cc.callFunc(() => this.node.destroy(), this),\r\n            ),\r\n        );\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}