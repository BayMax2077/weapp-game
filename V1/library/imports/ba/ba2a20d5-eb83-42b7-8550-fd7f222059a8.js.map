{"version":3,"sources":["assets\\scripts\\Games\\eliminating\\script\\EliminatingScene.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\nimport axios from '../../../utils/axiosUtils';\r\nimport State from '../../../utils/state';\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class EliminatingScene extends cc.Component {\r\n\r\n    // 岛屿\r\n    @property(cc.Prefab) isLand: cc.Prefab = null;\r\n    // 地图区域\r\n    @property(cc.Node) mapBox: cc.Node = null;\r\n    // 地图数据\r\n    mapData = [\r\n        [ 480, -80 ],\r\n        [ 800, 85 ],\r\n        [ 1090, -180 ],\r\n        [ 1300, 105 ],\r\n        [ 1470, -200 ],\r\n        [ 1657, 135 ],\r\n        [ 1880, -70 ],\r\n        [ 2138, 120 ],\r\n    ];\r\n    // 战绩\r\n    record;\r\n    /**\r\n     * 游戏信息\r\n     */\r\n    get info() {\r\n        return State.system.info('消消乐');\r\n    }\r\n\r\n\r\n    start () {\r\n        // this.node.on(cc.Node.EventType.TOUCH_START, event => {\r\n        //     console.log(event);\r\n        // }, this);\r\n        axios\r\n            .api('game_record', {\r\n                params: {\r\n                    gameId: this.info.id,  \r\n                },\r\n            })\r\n            .then(res => this.updateIsLand(res))\r\n            .catch(err => {\r\n                console.log(err);\r\n                State.tips('战绩数据加载失败', 5, false, 2)\r\n            })\r\n        ;\r\n        cc.director.preloadScene('gameEliminating');\r\n    }\r\n\r\n    \r\n    /**\r\n     * 加载岛屿\r\n     * @param recordData 战绩信息\r\n     */\r\n    updateIsLand(recordData: any[]) {\r\n        console.log(recordData);\r\n        // 是否被锁\r\n        let lock = false;\r\n        // 生成岛屿\r\n        this.mapData.forEach((point, index) => {\r\n            const island = cc.instantiate(this.isLand);\r\n            // 初始化岛屿，EliminatingLand脚本在子节点下\r\n            island.children[0].getComponent('EliminatingLand').init(recordData[index] || undefined, index, lock);\r\n            if (!recordData[index]) lock = true;\r\n            island.x = point[0] - 190;\r\n            island.y = point[1];\r\n            this.mapBox.addChild(island);\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * 无限模式\r\n     */\r\n    infiniteModel() {\r\n        cc.loader.loadRes('prefab/GroupLoading', (_err, prefab) => {\r\n            cc.director.loadScene('gameEliminating');\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * 返回大厅\r\n     */\r\n    backHome() {\r\n        cc.director.loadScene('Home');\r\n    }\r\n\r\n\r\n    /**\r\n     * 滚动场景时\r\n     * @param e 事件\r\n     */\r\n    scrollScent(e) {\r\n        // console.log(e);\r\n    }\r\n}\r\n"]}