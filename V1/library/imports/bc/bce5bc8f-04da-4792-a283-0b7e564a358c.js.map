{"version":3,"sources":["assets\\scripts\\Games\\wzq\\qz.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\nimport State from '../../utils/state';\r\n\r\n@ccclass\r\nexport default class GoBangQz extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    qzH: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    qzB: cc.Node = null;\r\n\r\n    @property({ visible: !1 })\r\n    point: Point = {\r\n        // 行\r\n        row: 0,\r\n        // 列\r\n        col: 0,\r\n        // 棋子类型 0：黑子  1：白子\r\n        pieceType: -1,\r\n    };\r\n\r\n    @property({\r\n        type: cc.AudioClip,\r\n    })\r\n    pieceAudio: cc.AudioClip = null;\r\n\r\n\r\n    @property({ visible: !0 })\r\n    pieceType: number = -1;\r\n\r\n    /**\r\n     * 调用者指针\r\n     */\r\n    game: any;\r\n\r\n    /**\r\n     * 初始化\r\n     */\r\n    init(point: Point) {\r\n        this.point = point;\r\n    }\r\n\r\n\r\n    /**\r\n     * 点击事件\r\n     * @param pieceType - 棋子类型 0：黑子  1：白子\r\n     */\r\n    onClick(pieceType) {\r\n        pieceType = typeof pieceType === 'number' ? pieceType : this.pieceType;\r\n        const { point, game } = this;\r\n        const { row, col } = point;\r\n        const pointObject = {\r\n            x: col,\r\n            y: row,\r\n            s: pieceType,\r\n        };\r\n        if (point.pieceType === -1) {\r\n            if (game.isMachine) {\r\n                game.machineDownPiece(pointObject);\r\n            } else {\r\n                State.io.emit('goBang/setp', pointObject);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * io触发棋子显现\r\n     * @param pieceType - 棋子类型 0：黑子  1：白子\r\n     */\r\n    ioClick(pieceType) {\r\n        pieceType = typeof pieceType === 'number' ? pieceType : this.pieceType;\r\n        const { point } = this;\r\n        if (point.pieceType === -1) {\r\n            // pieceType = 1;\r\n            point.pieceType = pieceType;\r\n            this.qzB.scale = pieceType ? 1 : 0;\r\n            this.qzH.scale = pieceType ? 0 : 1;\r\n            \r\n            cc.audioEngine.playEffect(this.pieceAudio, false);\r\n            // 五子连通检测\r\n            this.game.checkConnectivity(point, pieceType);\r\n        }\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n\r\ninterface Point {\r\n    row: number;\r\n    col: number;\r\n    pieceType: ( 0 | 1 | -1 )\r\n}"]}