{"version":3,"sources":["assets\\scripts\\Games\\eliminatingScene\\script\\EliminatingPanel.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAE5E,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAC1C,8CAAyC;AAGzC;IAA8C,oCAAY;IAA1D;QAAA,qEAuFC;QAtFG,OAAO;QACmB,gBAAU,GAAmB,IAAI,CAAC;QAC5D,KAAK;QACgB,WAAK,GAAgB,EAAE,CAAC;QAC7C,SAAS;QACyB,eAAS,GAAiB,IAAI,CAAC;QACjE,KAAK;QACc,aAAO,GAAY,IAAI,CAAC;QAC3C,KAAK;QACc,SAAG,GAAY,IAAI,CAAC;QACvC,OAAO;QACa,WAAK,GAAa,IAAI,CAAC;QAC3C,KAAK;QACe,WAAK,GAAa,IAAI,CAAC;;IAyE/C,CAAC;IAvEG,gCAAK,GAAL;QACI,OAAO;QACP,IAAI,CAAC,OAAO,CAAC,OAAO,GAAG,CAAC,CAAC;QACzB,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC;QAE3C,SAAS;QACT,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC;QAC9B,IAAI,CAAC,GAAG,CAAC,SAAS,CACf,EAAE,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE,CAAC,CAC/D,CAAC;IACN,CAAC;IAGD;;;OAGG;IACH,+BAAI,GAAJ,UAAK,OAAY;QAAjB,iBAIC;QAHG,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,OAAO,CAAC,KAAK,CAAC;QAClC,OAAO,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;QACrD,OAAO,CAAC,IAAI,IAAI,UAAU,CAAC,cAAM,OAAA,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAA1B,CAA0B,EAAE,GAAG,CAAC,CAAC;IACtE,CAAC;IAGD;;OAEG;IACH,mCAAQ,GAAR;QACI,eAAK,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,CAAA;QAC9C,kBAAkB;QAClB,+DAA+D;QAC/D,kDAAkD;QAClD,oDAAoD;QACpD,8DAA8D;QAC9D,4DAA4D;QAC5D,oDAAoD;QACpD,UAAU;QACV,uCAAuC;QACvC,MAAM;IACV,CAAC;IAGD;;;;;OAKG;IACH,kCAAO,GAAP,UAAQ,UAAkB,EAAE,KAAiB,EAAE,WAA4B;QAA3E,iBAcC;QAd2B,sBAAA,EAAA,SAAiB;QAAE,4BAAA,EAAA,mBAA4B;QACvE,IAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QACvB,IAAA,KAAK,GAAK,IAAI,CAAC,IAAI,MAAd,CAAe;QAC5B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC;QACnC,IAAI,CAAC,IAAI,CAAC,SAAS,CACf,EAAE,CAAC,QAAQ,CACP,EAAE,CAAC,OAAO,CAAC,EAAE,EAAE,KAAK,GAAG,EAAE,CAAC,EAC1B,EAAE,CAAC,OAAO,CAAC,EAAE,EAAE,KAAK,CAAC,EACrB,EAAE,CAAC,QAAQ,CAAC;YACR,IAAI,EAAE,UAAU;gBAAE,KAAI,CAAC,OAAO,CAAC,UAAU,EAAE,EAAE,KAAK,EAAE,WAAW,CAAC,CAAC;YACjE,WAAW,IAAI,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,KAAI,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;QACpE,CAAC,CAAC,CACL,CACJ,CAAC;IACN,CAAC;IAGD;;OAEG;IACH,gCAAK,GAAL;QACI,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;IACxB,CAAC;IApFyB;QAAzB,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;wDAAmC;IAEvC;QAApB,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;mDAAyB;IAEX;QAAjC,QAAQ,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,SAAS,EAAE,CAAC;uDAAgC;IAE9C;QAAlB,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;qDAAyB;IAExB;QAAlB,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;iDAAqB;IAEnB;QAAnB,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;mDAAwB;IAEvB;QAAnB,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;mDAAwB;IAd1B,gBAAgB;QADpC,OAAO;OACa,gBAAgB,CAuFpC;IAAD,uBAAC;CAvFD,AAuFC,CAvF6C,EAAE,CAAC,SAAS,GAuFzD;kBAvFoB,gBAAgB","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\nimport State from '../../../utils/state';\r\n\r\n@ccclass\r\nexport default class EliminatingPanel extends cc.Component {\r\n    // 实体星星\r\n    @property(cc.SpriteFrame) starEntity: cc.SpriteFrame = null;\r\n    // 三星\r\n    @property(cc.Sprite) stars: cc.Sprite[] = [];\r\n    // 获得星星音效\r\n    @property({ type: cc.AudioClip }) starAudio: cc.AudioClip = null;\r\n    // 背景\r\n    @property(cc.Node) backage: cc.Node = null;\r\n    // 容器\r\n    @property(cc.Node) box: cc.Node = null;\r\n    // 关卡名字\r\n    @property(cc.Label) names: cc.Label = null;\r\n    // 分数\r\n    @property(cc.Label) score: cc.Label = null;\r\n    \r\n    start() {\r\n        // 背景渐显\r\n        this.backage.opacity = 0;\r\n        this.backage.runAction(cc.fadeTo(.5, 125));\r\n\r\n        // 容器弹出动画\r\n        this.box.y += this.box.height;\r\n        this.box.runAction(\r\n           cc.moveBy(.5, 0, -this.box.height).easing(cc.easeBackInOut()),\r\n        );\r\n    }\r\n\r\n    \r\n    /**\r\n     * 初始化内容\r\n     * @param options 参数\r\n     */\r\n    init(options: any) {\r\n        this.names.string = options.names;\r\n        options.score && (this.score.string = options.score);\r\n        options.star && setTimeout(() => this.setStar(options.star), 500);\r\n    }\r\n\r\n\r\n    /**\r\n     * 按下开始游戏\r\n     */\r\n    playGame() {\r\n        State.tips('功能暂未开放, 请选择 \"无限模式\"!', 5, false, 2)\r\n        // TODO: 暂未开放的关卡内容\r\n        // cc.loader.loadRes('prefab/GroupLoading', (_err, prefab) => {\r\n        //     const instantiate = cc.instantiate(prefab);\r\n        //     cc.director.getScene().addChild(instantiate);\r\n        //     cc.director.preloadScene('gameEliminating', (_err) => {\r\n        //         instantiate.getComponent('GroupLoading').close();\r\n        //         cc.director.loadScene('gameEliminating');\r\n        //     });\r\n        //     cc.director.loadScene(gameName);\r\n        // });\r\n    }\r\n\r\n\r\n    /**\r\n     * 设置岛屿的星数\r\n     * @param starNumber  星数\r\n     * @param index       当前星下标\r\n     * @param audioEffect 是否播放音效\r\n     */ \r\n    setStar(starNumber: number, index: number = 0, audioEffect: boolean = false) {\r\n        const star = this.stars[index];\r\n        const { scale } = star.node;\r\n        star.spriteFrame = this.starEntity;\r\n        star.node.runAction(\r\n            cc.sequence(\r\n                cc.scaleTo(.2, scale + .5),\r\n                cc.scaleTo(.2, scale),\r\n                cc.callFunc(() => {\r\n                    if (--starNumber) this.setStar(starNumber, ++index, audioEffect);\r\n                    audioEffect && cc.audioEngine.playEffect(this.starAudio, false);\r\n                }),\r\n            ),\r\n        );\r\n    }\r\n\r\n\r\n    /**\r\n     * 关闭\r\n     */\r\n    close() {\r\n        this.node.destroy();\r\n    }\r\n}\r\n"]}